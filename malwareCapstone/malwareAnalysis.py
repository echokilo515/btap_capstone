import requests

# Path to the text file containing the list of file paths
file_list_path = (
    "C:/Users/echok/OneDrive/Desktop/malwareCapstone/hashes2investigate/test_list.txt"
)
# Replace with your actual VirusTotal API key
api_key = "YOUR_VIRUSTOTAL_API_KEY"
# Initialize a counter for successful requests
successful_requests = 0

# Read the second item from the text file
with open(file_list_path, "r") as file:
    lines = file.readlines()
    if len(lines) < 2:
        print("The list does not contain a second item.")
        exit()
    second_item_path = lines[1].strip()  # Assuming the file paths are on separate lines

# Upload the file to VirusTotal
url = "https://www.virustotal.com/api/v3/files"
files = {"file": (second_item_path, open(second_item_path, "rb"))}
headers = {"x-apikey": api_key}

response = requests.post(url, files=files, headers=headers)

if response.status_code == 200:
    print("File successfully uploaded.")
    print(response.json())
else:
    print("Failed to upload the file.")
    print(response.status_code, response.text)


